@using ShopAdmin.Common
@using ShopAdmin.Dto.Categories
@using ShopAdmin.Dto.Products
@using ShopAdmin.Helper

@model List<ProductDto>

<section class="products">
    <div class="container">
        @* <div class="products-header">
            <h2 class="section-title">@Model.Name</h2>
            <div class="filters">
                <select id="sortSelect" class="sort-select">
                    <option value="newest">Mới nhất</option>
                    <option value="price-low">Giá thấp đến cao</option>
                    <option value="price-high">Giá cao đến thấp</option>
                </select>
            </div>
        </div> *@

        @if (!Model.Any())
        {
            <div>
                <span>Không tìm thấy sản phẩm nào</span>
            </div>
        }
        else
        {
            <div class="products-grid" id="productsGrid">

                @foreach (var product in Model)
                {
                    var isSaleOff = product.PriceDiscount.HasValue && product.PriceDiscount > 0;

                    <div class="product-card fade-in" data-product="@product.Id" data-name="@(SlugHelper.GenerateSlug(product.Name))">
                        <div style="position: relative;">
                            <img src="@(product.ImageUrl.FirstOrDefault())" alt="@product.Name" class="product-image">
                            @if (isSaleOff)
                            {
                                <div class="product-badge badge-sale">SALE</div>
                            }
                        </div>
                        <div class="product-info">
                            <h3 class="product-name">@product.Name</h3>
                            <div class="product-price">
                                @if (isSaleOff)
                                {
                                    <span class="original-price">@(product.Price.ToStringNumber())&nbsp;₫</span>
                                    <span class="current-price">@(product.PriceDiscount.ToStringNumber())&nbsp;₫</span>
                                }
                                else
                                {
                                    <span class="current-price">@(product.Price.ToStringNumber())&nbsp;₫</span>
                                }
                            </div>
                            @* <div class="product-rating">
                    <span class="stars">★★★★☆</span>
                    <span class="rating-text">(203 đánh giá)</span>
                    </div> *@
                            @*  <button class="add-to-cart-btn">Thêm vào giỏ</button> *@
                        </div>
                    </div>
                }
            </div>
        }

    </div>
</section>

@section scripts {
    <script src="/js/Shop/sale.js"></script>
}